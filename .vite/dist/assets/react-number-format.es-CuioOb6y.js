import{a5 as k,r as F}from"./index-DRAxbQhQ.js";function rt(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r}var $;(function(t){t.event="event",t.props="prop"})($||($={}));function M(){}function St(t){var e,r=void 0;return function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return e&&a.length===e.length&&a.every(function(v,l){return v===e[l]})||(e=a,r=t.apply(void 0,a)),r}}function P(t){return!!(t||"").match(/\d/)}function z(t){return t==null}function Vt(t){return typeof t=="number"&&isNaN(t)}function wt(t){return z(t)||Vt(t)||typeof t=="number"&&!isFinite(t)}function It(t){var e=F.useRef(t);e.current=t;var r=F.useRef(function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return e.current.apply(e,a)});return r.current}function et(t,e){return Array(e+1).join(t)}function bt(t){var e=t+"",r=e[0]==="-"?"-":"";r&&(e=e.substring(1));var a=e.split(/[eE]/g),n=a[0],v=a[1];if(v=Number(v),!v)return r+n;n=n.replace(".","");var l=1+v,s=n.length;return l<0?n="0."+et("0",Math.abs(l))+n:l>=s?n=n+et("0",l-s):n=(n.substring(0,l)||"0")+"."+n.substring(l),r+n}function Q(t,e){if(t.value=t.value,t!==null){if(t.createTextRange){var r=t.createTextRange();return r.move("character",e),r.select(),!0}return t.selectionStart||t.selectionStart===0?(t.focus(),t.setSelectionRange(e,e),!0):(t.focus(),!1)}}var pt=St(function(t,e){for(var r=0,a=0,n=t.length,v=e.length;t[r]===e[r]&&r<n;)r++;for(;t[n-1-a]===e[v-1-a]&&v-a>r&&n-a>r;)a++;return{from:{start:r,end:n-a},to:{start:r,end:v-a}}});function At(t,e,r){return Math.min(Math.max(t,e),r)}function J(t){return Math.max(t.selectionStart,t.selectionEnd)}function xt(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Et(t){return{from:{start:0,end:0},to:{start:0,end:t.length},lastValue:""}}function nt(t,e){return t===void 0&&(t=" "),typeof t=="string"?t:t[e]||" "}function Nt(t){var e=t.currentValue,r=t.formattedValue,a=t.currentValueIndex,n=t.formattedValueIndex;return e[a]===r[n]}function Ot(t,e,r,a,n,v,l){l===void 0&&(l=Nt);var s=n.findIndex(function(x){return x}),m=t.slice(0,s);!e&&!r.startsWith(m)&&(e=m,r=m+r,a=a+m.length);for(var C=r.length,b=t.length,N={},c=new Array(C),y=0;y<C;y++){c[y]=-1;for(var o=0,p=b;o<p;o++){var g=l({currentValue:r,lastValue:e,formattedValue:t,currentValueIndex:y,formattedValueIndex:o});if(g&&N[o]!==!0){c[y]=o,N[o]=!0;break}}}for(var d=a;d<C&&(c[d]===-1||!v(r[d]));)d++;var O=d===C||c[d]===-1?b:c[d];for(d=a-1;d>0&&c[d]===-1;)d--;var S=d===-1||c[d]===-1?0:c[d]+1;return S>O?O:a-S<O-a?S:O}function W(t,e,r,a){var n=t.length;if(e=At(e,0,n),a==="left"){for(;e>=0&&!r[e];)e--;e===-1&&(e=r.indexOf(!0))}else{for(;e<=n&&!r[e];)e++;e>n&&(e=r.lastIndexOf(!0))}return e===-1&&(e=n),e}function Ft(t){for(var e=Array.from({length:t.length+1}).map(function(){return!0}),r=0,a=e.length;r<a;r++)e[r]=!!(P(t[r])||P(t[r-1]));return e}function Tt(t,e,r,a,n,v){v===void 0&&(v=M);var l=It(function(o,p){var g,d;return wt(o)?(d="",g=""):typeof o=="number"||p?(d=typeof o=="number"?bt(o):o,g=a(d)):(d=n(o,void 0),g=a(d)),{formattedValue:g,numAsString:d}}),s=F.useState(function(){return l(z(t)?e:t,r)}),m=s[0],C=s[1],b=function(o,p){o.formattedValue!==m.formattedValue&&C({formattedValue:o.formattedValue,numAsString:o.value}),v(o,p)},N=t,c=r;z(t)&&(N=m.numAsString,c=!0);var y=l(N,c);return F.useMemo(function(){C(y)},[y.formattedValue]),[m,b]}function Bt(t){return t.replace(/[^0-9]/g,"")}function Mt(t){return t}function Rt(t){var e=t.type;e===void 0&&(e="text");var r=t.displayType;r===void 0&&(r="input");var a=t.customInput,n=t.renderText,v=t.getInputRef,l=t.format;l===void 0&&(l=Mt);var s=t.removeFormatting;s===void 0&&(s=Bt);var m=t.defaultValue,C=t.valueIsNumericString,b=t.onValueChange,N=t.isAllowed,c=t.onChange;c===void 0&&(c=M);var y=t.onKeyDown;y===void 0&&(y=M);var o=t.onMouseUp;o===void 0&&(o=M);var p=t.onFocus;p===void 0&&(p=M);var g=t.onBlur;g===void 0&&(g=M);var d=t.value,O=t.getCaretBoundary;O===void 0&&(O=Ft);var S=t.isValidInputCharacter;S===void 0&&(S=P);var x=t.isCharacterSame,T=rt(t,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),L=Tt(d,m,!!C,l,s,b),X=L[0],V=X.formattedValue,K=X.numAsString,at=L[1],U=F.useRef({formattedValue:V,numAsString:K}),Y=function(i,u){U.current={formattedValue:i.formattedValue,numAsString:i.value},at(i,u)},Z=F.useState(!1),it=Z[0],ut=Z[1],_=F.useRef(null),R=F.useRef({setCaretTimeout:null,focusTimeout:null});F.useEffect(function(){return ut(!0),function(){clearTimeout(R.current.setCaretTimeout),clearTimeout(R.current.focusTimeout)}},[]);var ot=l,q=function(i,u){var f=parseFloat(u);return{formattedValue:i,value:u,floatValue:isNaN(f)?void 0:f}},B=function(i,u,f){i.selectionStart===0&&i.selectionEnd===i.value.length||(Q(i,u),R.current.setCaretTimeout=setTimeout(function(){i.value===f&&i.selectionStart!==i.selectionEnd&&Q(i,u)},0))},D=function(i,u,f){return W(i,u,O(i),f)},G=function(i,u,f){var w=O(u),I=Ot(u,V,i,f,w,S,x);return I=W(u,I,w),I},ft=function(i){var u=i.formattedValue;u===void 0&&(u="");var f=i.input,w=i.setCaretPosition;w===void 0&&(w=!0);var I=i.source,h=i.event,A=i.numAsString,E=i.caretPos;if(f){if(E===void 0&&w){var j=i.inputValue||f.value,H=J(f);f.value=u,E=G(j,u,H)}f.value=u,w&&E!==void 0&&B(f,E,u)}u!==V&&Y(q(u,A),{event:h,source:I})};F.useEffect(function(){var i=U.current,u=i.formattedValue,f=i.numAsString;V!==u&&(V!==K||u!==f)&&Y(q(V,K),{event:void 0,source:$.props})},[V,K]);var vt=_.current?J(_.current):void 0,lt=typeof window<"u"?F.useLayoutEffect:F.useEffect;lt(function(){var i=_.current;if(V!==U.current.formattedValue&&i){var u=G(U.current.formattedValue,V,vt);i.value=V,B(i,u,V)}},[V]);var ct=function(i,u,f){var w=pt(V,i),I=Object.assign(Object.assign({},w),{lastValue:V}),h=s(i,I),A=ot(h);if(h=s(A,void 0),N&&!N(q(A,h))){var E=u.target,j=J(E),H=G(i,V,j);return E.value=V,B(E,H,V),!1}return ft({formattedValue:A,numAsString:h,inputValue:i,event:u,source:f,setCaretPosition:!0,input:u.target}),!0},st=function(i){var u=i.target,f=u.value,w=ct(f,i,$.event);w&&c(i)},dt=function(i){var u=i.target,f=i.key,w=u.selectionStart,I=u.selectionEnd,h=u.value;h===void 0&&(h="");var A;if(f==="ArrowLeft"||f==="Backspace"?A=Math.max(w-1,0):f==="ArrowRight"?A=Math.min(w+1,h.length):f==="Delete"&&(A=w),A===void 0||w!==I){y(i);return}var E=A;if(f==="ArrowLeft"||f==="ArrowRight"){var j=f==="ArrowLeft"?"left":"right";E=D(h,A,j),E!==A&&i.preventDefault()}else f==="Delete"&&!S(h[A])?E=D(h,A,"right"):f==="Backspace"&&!S(h[A])&&(E=D(h,A,"left"));E!==A&&B(u,E,h),i.isUnitTestRun&&B(u,E,h),y(i)},mt=function(i){var u=i.target,f=u.selectionStart,w=u.selectionEnd,I=u.value;if(I===void 0&&(I=""),f===w){var h=D(I,f);h!==f&&B(u,h,I)}o(i)},gt=function(i){i.persist&&i.persist();var u=i.target;_.current=u,R.current.focusTimeout=setTimeout(function(){var f=u.selectionStart,w=u.selectionEnd,I=u.value;I===void 0&&(I="");var h=D(I,f);h!==f&&!(f===0&&w===I.length)&&B(u,h,I),p(i)},0)},ht=function(i){_.current=null,clearTimeout(R.current.focusTimeout),clearTimeout(R.current.setCaretTimeout),g(i)},yt=it&&xt()?"numeric":void 0,tt=Object.assign({inputMode:yt},T,{type:e,value:V,onChange:st,onKeyDown:dt,onMouseUp:mt,onFocus:gt,onBlur:ht});if(r==="text")return n?k.createElement(k.Fragment,null,n(V,T)||null):k.createElement("span",Object.assign({},T,{ref:v}),V);if(a){var Ct=a;return k.createElement(Ct,Object.assign({},tt,{ref:v}))}return k.createElement("input",Object.assign({},tt,{ref:v}))}function kt(t,e){var r=e.format,a=e.allowEmptyFormatting,n=e.mask,v=e.patternChar;if(v===void 0&&(v="#"),t===""&&!a)return"";for(var l=0,s=r.split(""),m=0,C=r.length;m<C;m++)r[m]===v&&(s[m]=t[l]||nt(n,l),l+=1);return s.join("")}function _t(t,e,r){e===void 0&&(e=Et(t));var a=r.format,n=r.patternChar;n===void 0&&(n="#");var v=e.from,l=e.to,s=e.lastValue;s===void 0&&(s="");var m=function(g){return a[g]===n},C=function(g,d){for(var O="",S=0;S<g.length;S++)m(d+S)&&P(g[S])&&(O+=g[S]);return O},b=function(g){return g.replace(/[^0-9]/g,"")};if(!a.match(/\d/))return b(t);if(s===""&&t.length===a.length){for(var N="",c=0;c<t.length;c++)if(m(c))P(t[c])&&(N+=t[c]);else if(t[c]!==a[c])return b(t);return N}var y=s.substring(0,v.start),o=t.substring(l.start,l.end),p=s.substring(v.end);return""+C(y,0)+b(o)+C(p,v.end)}function Dt(t,e){var r=e.format,a=e.mask,n=e.patternChar;n===void 0&&(n="#");var v=Array.from({length:t.length+1}).map(function(){return!0}),l=0,s=-1,m={};r.split("").forEach(function(c,y){var o=void 0;c===n&&(l++,o=nt(a,l-1),s===-1&&t[y]===o&&(s=y)),m[y]=o});for(var C=function(c){return r[c]===n&&t[c]!==m[c]},b=0,N=v.length;b<N;b++)v[b]=b===s||C(b)||C(b-1);return v[r.indexOf(n)]=!0,v}function jt(t){var e=t.mask;if(e){var r=e==="string"?e:e.toString();if(r.match(/\d/g))throw new Error("Mask "+e+" should not contain numeric character;")}}function Pt(t,e){return t===""?!0:!(e!=null&&e.match(/\d/))&&typeof t=="string"&&(!!t.match(/^\d+$/)||t==="")}function Lt(t){t.mask,t.allowEmptyFormatting;var e=t.format,r=t.inputMode;r===void 0&&(r="numeric");var a=t.onKeyDown;a===void 0&&(a=M);var n=t.patternChar;n===void 0&&(n="#");var v=t.value,l=t.defaultValue,s=t.valueIsNumericString,m=rt(t,["mask","allowEmptyFormatting","format","inputMode","onKeyDown","patternChar","value","defaultValue","valueIsNumericString"]);jt(t);var C=function(o){return Dt(o,t)},b=function(o){var p=o.key,g=o.target,d=g.selectionStart,O=g.selectionEnd,S=g.value;if(d!==O){a(o);return}var x=d;if(p==="Backspace"||p==="Delete"){var T="right";if(p==="Backspace"){for(;x>0&&e[x-1]!==n;)x--;T="left"}else{for(var L=e.length;x<L&&e[x]!==n;)x++;T="right"}x=W(S,x,C(S),T)}else e[x]!==n&&p!=="ArrowLeft"&&p!=="ArrowRight"&&(x=W(S,x+1,C(S),"right"));x!==d&&Q(g,x),a(o)},N=z(v)?l:v,c=s??Pt(N,e),y=Object.assign(Object.assign({},t),{valueIsNumericString:c});return Object.assign(Object.assign({},m),{value:v,defaultValue:l,valueIsNumericString:c,inputMode:r,format:function(o){return kt(o,y)},removeFormatting:function(o,p){return _t(o,p,y)},getCaretBoundary:C,onKeyDown:b})}function Ut(t){var e=Lt(t);return k.createElement(Rt,Object.assign({},e))}export{Rt as N,Ut as P,Lt as u};
