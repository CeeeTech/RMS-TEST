import{P as q,r as a,am as z,an as L,aJ as H,l as e,G as r,S as d,F as I,ab as T,D as c,O as Q,M as V,T as G,cH as _,a1 as M,aC as J,bf as K,bh as Z,$ as U}from"./index-DRAxbQhQ.js";import{c as X,a as E}from"./index.esm-Dd68ZLmj.js";import{u as Y}from"./formik.esm-GkfYgtGj.js";import k from"./index-B2V0F-2w.js";import{d as ee}from"./Add-C6wQOJw8.js";import{I as v}from"./InputLabel-BTLx1hne.js";import{T as C}from"./TextField-C23CKz-E.js";import{S as B}from"./Select-D4CpAZMw.js";import{I as te}from"./InputAdornment-Cj0cTNRg.js";import{M as f}from"./MenuItem-I_H4wdck.js";import{A as re}from"./AdapterDateFns-Dp0D6rxW.js";import{F as se}from"./FormHelperText-YH3vNJL3.js";import{D as ne}from"./DialogContent-gFGUw3A9.js";import{L as ie}from"./dateViewRenderers-CPN42OR2.js";import{D as ae}from"./DatePicker-CGE-5zgx.js";import{d as le}from"./DeleteTwoTone-DERgnZv9.js";import{T as oe,a as de,b as D,c as ue}from"./TableRow-C4jGaY-n.js";import{T as ce}from"./TableHead-DeUPG7xB.js";import{T as h}from"./TableCell-GjZj8q6n.js";import{S as me}from"./SubCard-DHuXmrDE.js";import{I as P}from"./InputLabel-Do1Ellp1.js";import{F as he}from"./FormControl-DTGQKB1F.js";import{O as xe}from"./OutlinedInput-C-PMnjYA.js";import"./isArrayLike-C-wli46Q.js";import"./_getTag-D0Y4uZ2p.js";import"./isSymbol-ckKrFcy_.js";import"./Checkbox-DF2srxXR.js";import"./WorkTwoTone-Yj0ZVdCO.js";import"./PersonAddTwoTone-DX-Wa53A.js";import"./PinDropTwoTone-BRbeDmdH.js";import"./CardActions-DgWdTrRU.js";import"./FormLabel-D7QhHnPX.js";import"./Menu-DCGCr4Gv.js";import"./utils-DoM3o7-Q.js";import"./InputBase-C10xFuq9.js";import"./index-DhB-ElUn.js";import"./typeof-QjJsDpFa.js";import"./toPropertyKey-H7AvS4qg.js";import"./DialogActions-C6ICZgZa.js";import"./ListItem-5UQNGP8M.js";import"./ListItemSecondaryAction-Nz3BUvML.js";import"./DesktopDatePicker-CQJ6NJUR.js";import"./useDesktopPicker-DSmbSKOn.js";import"./useMobilePicker-CGQCh2af.js";const W=({formik:t,handleOnSelectValue:x})=>{const[n,A]=a.useState(""),[l,j]=a.useState([]),[g,y]=a.useState(!1),[i,N]=a.useState(new Date),{detailCards:m}=z(u=>u.user),p=()=>{y(!g)},S=u=>{A(u.target.value)};return a.useEffect(()=>{j(m)},[m]),a.useEffect(()=>{L(H())},[]),e.jsxs(e.Fragment,{children:[e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(d,{children:[e.jsx(v,{required:!0,sx:{color:"grey.500",fontWeight:"400"},children:"Invoice Number"}),e.jsx(C,{id:"invoiceNumber",name:"invoiceNumber",value:t.values.invoiceNumber,onBlur:t.handleBlur,error:t.touched.invoiceNumber&&!!t.errors.invoiceNumber,helperText:t.touched.invoiceNumber&&t.errors.invoiceNumber,onChange:t.handleChange,fullWidth:!0,placeholder:"Invoice #"})]})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(d,{children:[e.jsx(v,{id:"demo-simple-select-label",children:"Select Client"}),e.jsxs(B,{endAdornment:e.jsx(te,{position:"end",children:e.jsx(I,{onClick:p,startIcon:e.jsx(ee,{}),children:"New client"})}),defaultValue:"",sx:{"& .MuiSelect-icon":{right:120}},labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Client",onChange:S,value:n,children:[e.jsx(f,{value:"",children:"Select Client"}),l.map((u,s)=>e.jsx(f,{value:s,onClick:()=>x(u),children:u.name},s))]})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(T,{})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(d,{children:[e.jsx(v,{required:!0,children:"Client Name"}),e.jsx(C,{fullWidth:!0,id:"customerName",name:"customerName",value:t.values.customerName,onChange:t.handleChange,onBlur:t.handleBlur,error:t.touched.customerName&&!!t.errors.customerName,helperText:t.touched.customerName&&t.errors.customerName,placeholder:"Alex Z."})]})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(d,{children:[e.jsx(v,{required:!0,children:"Client Email"}),e.jsx(C,{type:"email",fullWidth:!0,id:"customerEmail",name:"customerEmail",value:t.values.customerEmail,onChange:t.handleChange,onBlur:t.handleBlur,error:t.touched.customerEmail&&!!t.errors.customerEmail,helperText:t.touched.customerEmail&&t.errors.customerEmail,placeholder:"alex@company.com"})]})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(d,{children:[e.jsx(v,{required:!0,children:"Client Contact Numer"}),e.jsx(C,{fullWidth:!0,id:"customerPhone",name:"customerPhone",value:t.values.customerPhone,onBlur:t.handleBlur,error:t.touched.customerPhone&&!!t.errors.customerPhone,helperText:t.touched.customerPhone&&t.errors.customerPhone,onChange:t.handleChange,placeholder:"+ 00 00000 00000"})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(d,{children:[e.jsx(v,{required:!0,children:"Client Address"}),e.jsx(C,{fullWidth:!0,id:"customerAddress",name:"customerAddress",value:t.values.customerAddress,onBlur:t.handleBlur,error:t.touched.customerAddress&&!!t.errors.customerAddress,helperText:t.touched.customerAddress&&t.errors.customerAddress,onChange:t.handleChange,multiline:!0,placeholder:"Enter Address"})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(T,{})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(d,{children:[e.jsx(v,{required:!0,children:"Invoice Date"}),e.jsx(ie,{dateAdapter:re,children:e.jsx(ae,{format:"dd/MM/yyyy",slotProps:{textField:{fullWidth:!0}},value:i,onChange:u=>{N(u)}})})]})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(d,{children:[e.jsx(v,{required:!0,children:"Status"}),e.jsxs(B,{id:"orderStatus",name:"orderStatus",defaultValue:t.values.orderStatus,value:t.values.orderStatus,onChange:t.handleChange,children:[e.jsx(f,{value:"pending",children:"Pending"}),e.jsx(f,{value:"refund",children:"Refund"}),e.jsx(f,{value:"paid",children:"Paid"})]}),t.errors.orderStatus&&e.jsx(se,{error:!0,children:t.errors.orderStatus})]})}),e.jsx(ne,{open:g,onClose:p,sx:{"& .MuiDialog-paper":{maxWidth:"100%",width:980}},children:g&&e.jsx(k,{isOpen:!0,handleDialogToggler:p})})]})};W.propTypes={formik:q.object,handleOnSelectValue:q.func};function R({productsData:t,deleteProductHandler:x}){return e.jsx(oe,{children:e.jsxs(de,{children:[e.jsx(ce,{children:e.jsxs(D,{children:[e.jsx(h,{sx:{pl:3},children:"Description"}),e.jsx(h,{align:"right",children:"Quantity"}),e.jsx(h,{align:"right",children:"Amount"}),e.jsx(h,{align:"right",children:"Total"}),e.jsx(h,{})]})}),e.jsx(ue,{children:t.map((n,A)=>e.jsxs(D,{children:[e.jsxs(h,{sx:{pl:3},children:[e.jsx(c,{variant:"subtitle1",children:n.product}),e.jsx(c,{variant:"body2",children:n.description})]}),e.jsx(h,{align:"right",children:n.quantity}),e.jsxs(h,{align:"right",children:["$",n.amount]}),e.jsxs(h,{align:"right",children:["$",Math.round(n.total*100)/100]}),e.jsx(h,{sx:{pr:1},align:"right",children:e.jsx(Q,{color:"error",size:"small",onClick:()=>x(n.id),"aria-label":"'Delete'",children:e.jsx(le,{fontSize:"small"})})})]},A))})]})})}R.propTypes={productsData:q.array,deleteProductHandler:q.func};function F({allAmounts:t}){const x=V();return e.jsx(me,{sx:{bgcolor:x.palette.mode===G.DARK?"dark.main":"primary.light"},children:e.jsx(r,{container:!0,justifyContent:"flex-end",spacing:2,children:e.jsx(r,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(c,{align:"right",variant:"subtitle1",children:"Sub Total :"})}),e.jsx(r,{item:!0,xs:6,children:e.jsxs(c,{align:"right",variant:"body2",children:["$",Math.round(t.subTotal*100)/100]})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(c,{align:"right",variant:"subtitle1",children:"Tax (10%) :"})}),e.jsx(r,{item:!0,xs:6,children:e.jsxs(c,{align:"right",variant:"body2",children:["$",Math.round(t.taxesAmount*100)/100]})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(c,{align:"right",variant:"subtitle1",children:"Discount (5%) :"})}),e.jsx(r,{item:!0,xs:6,children:e.jsxs(c,{align:"right",variant:"body2",children:["$",Math.round(t.discountAmount*100)/100]})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(T,{})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(c,{align:"right",color:"primary",variant:"subtitle1",children:"Total :"})}),e.jsx(r,{item:!0,xs:6,children:e.jsxs(c,{align:"right",color:"primary",variant:"subtitle1",children:["$",Math.round(t.totalAmount*100)/100]})})]})})]})})})})}F.propTypes={allAmounts:q.object};function $({handleAddItem:t,setAddItemClicked:x}){const[n,A]=a.useState(),[l,j]=a.useState(1),[g,y]=a.useState(0),[i,N]=a.useState([]),[m,p]=a.useState({quantityError:""}),S=_();a.useEffect(()=>{N(S)},[S]),a.useEffect(()=>{n!=null&&n.id&&y((n==null?void 0:n.offerPrice)*l)},[l,n]);const u=o=>{const b=o.target.value;if(o.target.name==="quantity")Number(b)<0?(p({...m,quantityError:"negative values not allowed"}),j(b)):Number(b)===0?(p({...m,quantityError:"quantity can not be zero"}),j(b)):(j(b),p({...m,quantityError:""}));else{const O=i.find(w=>w.id===b);A(O)}},s=()=>{const o={...n,totalAmount:g,selectedQuantity:l};t(o)};return e.jsxs(r,{container:!0,spacing:M,children:[e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(d,{spacing:1,children:[e.jsx(P,{sx:{color:"grey.500",fontWeight:"400"},children:"Item Name"}),e.jsx(he,{children:e.jsxs(B,{fullWidth:!0,displayEmpty:!0,value:(n==null?void 0:n.id)||"",onChange:u,input:e.jsx(xe,{}),inputProps:{"aria-label":"Without label"},children:[e.jsx(f,{disabled:!0,value:"",children:e.jsx(c,{color:"textSecondary",children:"Select Item"})}),i.map((o,b)=>e.jsx(f,{value:o.id,children:e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{width:"100%"},children:[e.jsx(c,{variant:"subtitle1",children:o.name}),e.jsxs(c,{children:["Rate : ",o.offerPrice]})]})},b))]})})]})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(d,{spacing:1,children:[e.jsx(P,{sx:{color:"grey.500",fontWeight:"400"},children:"Quantity"}),e.jsx(C,{fullWidth:!0,type:"number",name:"quantity",value:l,onChange:u,error:!!m.quantityError,helperText:m.quantityError,disabled:!(n!=null&&n.id)})]})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(d,{spacing:1,children:[e.jsx(P,{sx:{color:"grey.500",fontWeight:"400"},children:"Amount"}),e.jsx(C,{fullWidth:!0,name:"amount",value:Math.round(g*100)/100,disabled:!0})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(d,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-end",children:[e.jsx(I,{color:"error",onClick:()=>x(!1),children:"Cancel"}),e.jsx(I,{disabled:!(n!=null&&n.id)||!l,variant:"contained",size:"small",onClick:s,children:"Add"})]})})]})}$.propTypes={handleAddItem:q.func,setAddItemClicked:q.func};const pe=X({invoiceNumber:E().required("Invoice Number is Required"),customerName:E().required("Client Name is Required"),customerEmail:E().email("Enter a valid email").required("Client Email is Required"),customerPhone:E().min(10,"Phone number should be of minimum 10 characters").required("Client Phone is Required"),customerAddress:E().required("Client Address is Required"),orderStatus:E().required("Order Status is required")});function at(){const t=J(),x=K(),[n,A]=a.useState({subTotal:0,appliedTaxValue:.1,appliedDiscountValue:.05,taxesAmount:0,discountAmount:0,totalAmount:0}),[l,j]=a.useState([]),[g,y]=a.useState(!0),[i,N]=a.useState(),m=s=>{j(l.filter(o=>o.id!==s))},p=s=>{let o=Math.floor(Math.random()*1e5);N({...s,id:o})},S=Y({enableReinitialize:!0,initialValues:{invoiceNumber:i?i==null?void 0:i.id:"#58963",customerName:i?i==null?void 0:i.name:"",customerEmail:i?i==null?void 0:i.email:"",customerPhone:i?i==null?void 0:i.contact:"",customerAddress:i?i==null?void 0:i.location:"",orderStatus:"pending"},validationSchema:pe,onSubmit:s=>{s&&(t("/apps/invoice/invoice-list"),x(Z({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"},close:!1})))}});a.useEffect(()=>{const s={subTotal:0,appliedTaxValue:.1,appliedDiscountValue:.05,taxesAmount:0,discountAmount:0,totalAmount:0};l.forEach(o=>{s.subTotal+=o.total}),s.taxesAmount=s.subTotal*s.appliedTaxValue,s.discountAmount=(s.subTotal+s.taxesAmount)*s.appliedDiscountValue,s.totalAmount=s.subTotal+s.taxesAmount-s.discountAmount,A(s)},[l]);const u=s=>{j([...l,{id:s.id,product:s.name,description:s.description,quantity:s.selectedQuantity,amount:s.offerPrice,total:s.totalAmount}]),y(!1)};return e.jsx(U,{title:"Create Invoice",children:e.jsx("form",{onSubmit:S.handleSubmit,children:e.jsxs(r,{container:!0,spacing:M,children:[e.jsx(W,{formik:S,handleOnSelectValue:p}),e.jsx(r,{item:!0,xs:12,children:e.jsx(T,{})}),l.length>0&&e.jsx(r,{item:!0,xs:12,children:e.jsx(R,{productsData:l,deleteProductHandler:m})}),g?e.jsx(r,{item:!0,xs:12,children:e.jsx($,{handleAddItem:u,setAddItemClicked:y})}):e.jsx(r,{item:!0,xs:12,children:e.jsx(I,{variant:"text",onClick:()=>y(!0),children:"+ Add Item"})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(T,{})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(F,{allAmounts:n})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(T,{})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(d,{children:[e.jsx(P,{required:!0,children:"Terms and Condition:"}),e.jsx(C,{fullWidth:!0,id:"customerAddress",name:"customerAddress",defaultValue:"I acknowledge terms and conditions.",multiline:!0,placeholder:"Enter Address"})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(T,{})}),e.jsx(r,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(I,{variant:"contained",type:"submit",children:"Add Invoice"})})]})})})}export{at as default};
