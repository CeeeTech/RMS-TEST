import{be as ne,P as I,bf as R,am as $,bg as Le,bh as H,l as e,a_ as ae,K as P,G as r,D as m,aH as le,ae as z,aI as A,E as oe,F as q,bi as Ke,x as L,y as K,M as G,r as k,S as U,I as de,aj as ce,O as _,T as N,Y as X,bj as Ge,bk as Ne,a5 as Xe,ak as Ye,bl as Je,bm as Qe,bn as Ze}from"./index-DRAxbQhQ.js";import{P as he,A as et,d as tt,a as rt,C as ue,E as it,D as st,I as nt}from"./ItemDetails-9z2iYLj8.js";import{c as me,a as pe,d as xe}from"./index.esm-Dd68ZLmj.js";import{u as je}from"./formik.esm-GkfYgtGj.js";import{M as ge,D as fe}from"./MultiFile-C7wWuum6.js";import{g as be,I as ye}from"./getImageUrl-nY85S8xQ.js";import{L as ve}from"./dateViewRenderers-CPN42OR2.js";import{A as we}from"./AdapterDateFns-Dp0D6rxW.js";import{T}from"./TextField-C23CKz-E.js";import{A as Se}from"./Autocomplete-IOsgmMSK.js";import{F as E}from"./FormControl-DTGQKB1F.js";import{D as De}from"./DesktopDatePicker-CQJ6NJUR.js";import{S as Ie}from"./Select-D4CpAZMw.js";import{M as O}from"./MenuItem-I_H4wdck.js";import{d as Ce}from"./MoreVertTwoTone-9z-6hxIF.js";import{b as F,T as ke,a as Te,c as Me}from"./TableRow-C4jGaY-n.js";import{T as o}from"./TableCell-GjZj8q6n.js";import{M as ze}from"./Menu-DCGCr4Gv.js";import{f as Ae}from"./index-DhB-ElUn.js";import{d as at}from"./KeyboardArrowDown-APD4kSdG.js";import{T as Oe}from"./Tooltip-CFImnuRV.js";import{d as lt}from"./Add-C6wQOJw8.js";import{T as ot}from"./TableHead-DeUPG7xB.js";import"./FiberManualRecord-DkBq1n3h.js";import"./DialogContent-gFGUw3A9.js";import"./DialogTitle-5RCmAPQ8.js";import"./DialogContentText-BaLIhO-x.js";import"./DialogActions-C6ICZgZa.js";import"./DeleteTwoTone-DERgnZv9.js";import"./isArrayLike-C-wli46Q.js";import"./_getTag-D0Y4uZ2p.js";import"./isSymbol-ckKrFcy_.js";import"./InsertDriveFileOutlined-CH_HPfyl.js";import"./ListItem-5UQNGP8M.js";import"./ListItemSecondaryAction-Nz3BUvML.js";import"./InputAdornment-Cj0cTNRg.js";import"./typeof-QjJsDpFa.js";import"./toPropertyKey-H7AvS4qg.js";import"./InputLabel-BTLx1hne.js";import"./FormLabel-D7QhHnPX.js";import"./FormHelperText-YH3vNJL3.js";import"./OutlinedInput-C-PMnjYA.js";import"./InputBase-C10xFuq9.js";import"./utils-DoM3o7-Q.js";import"./ListSubheader-B3jp8p9v.js";import"./usePreviousProps-GibiJsmS.js";import"./useDesktopPicker-DSmbSKOn.js";const dt=new ne.Chance,ct=me({title:pe().required("User story title is required"),dueDate:xe()}),We=({open:n,handleDrawerOpen:a})=>{const u=R(),c=$(i=>i.kanban),{profiles:j,columns:g,userStory:w,userStoryOrder:v}=c,t=je({initialValues:{id:`${dt.integer({min:1e3,max:9999})}`,title:"",assign:null,columnId:"",priority:"low",dueDate:new Date,acceptance:"",description:"",commentIds:"",image:!1,itemIds:[],files:[]},validationSchema:ct,onSubmit:i=>{u(Le(i,w,v)),u(H({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"},close:!1})),a()}});return e.jsx(ae,{sx:{ml:n?3:0,flexShrink:0,zIndex:1200,overflowX:"hidden",width:{xs:320,md:450},"& .MuiDrawer-paper":{height:"100vh",width:{xs:320,md:450},position:"fixed",border:"none",borderRadius:"0px"}},variant:"temporary",anchor:"right",open:n,ModalProps:{keepMounted:!0},onClose:a,children:n&&e.jsx(P,{sx:{p:3},children:e.jsx("form",{onSubmit:t.handleSubmit,children:e.jsx(ve,{dateAdapter:we,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(m,{variant:"h4",children:"Add Story"})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(T,{fullWidth:!0,id:"title",name:"title",label:"Title",value:t.values.title,onChange:t.handleChange,error:t.touched.title&&!!t.errors.title,helperText:t.touched.title&&t.errors.title})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(m,{variant:"subtitle1",children:"Assign to:"})}),e.jsx(r,{item:!0,xs:12,sm:8,children:e.jsx(r,{container:!0,justifyContent:"flex-start",children:e.jsx(Se,{id:"assign",value:j.find(i=>i.id===t.values.assign)||null,onChange:(i,s)=>{t.setFieldValue("assign",s==null?void 0:s.id)},options:j,fullWidth:!0,autoHighlight:!0,getOptionLabel:i=>i.name,isOptionEqualToValue:i=>i.id===t.values.assign,renderOption:(i,s)=>e.jsxs(P,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...i,children:[e.jsx("img",{loading:"lazy",width:"20",src:be(`${s.avatar}`,ye.USERS),alt:""}),s.name]}),renderInput:i=>e.jsx(T,{...i,label:"Choose a assignee",inputProps:{...i.inputProps,autoComplete:"new-password"}})})})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(m,{variant:"subtitle1",children:"Prioritize:"})}),e.jsx(r,{item:!0,xs:12,sm:8,children:e.jsx(E,{children:e.jsxs(le,{row:!0,"aria-label":"color",value:t.values.priority,onChange:t.handleChange,name:"priority",id:"priority",children:[e.jsx(z,{value:"low",control:e.jsx(A,{color:"primary",sx:{color:"primary.main"}}),label:"Low"}),e.jsx(z,{value:"medium",control:e.jsx(A,{color:"warning",sx:{color:"warning.main"}}),label:"Medium"}),e.jsx(z,{value:"high",control:e.jsx(A,{color:"error",sx:{color:"error.main"}}),label:"High"})]})})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(m,{variant:"subtitle1",children:"Due date:"})}),e.jsx(r,{item:!0,xs:12,sm:8,children:e.jsx(De,{label:"Due Date",value:t.values.dueDate,format:"dd/MM/yyyy",onChange:i=>{t.setFieldValue("dueDate",i)},slotProps:{textField:{fullWidth:!0}}})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(m,{variant:"subtitle1",children:"Acceptance:"})}),e.jsx(r,{item:!0,xs:12,sm:8,children:e.jsx(T,{fullWidth:!0,id:"acceptance",name:"acceptance",multiline:!0,rows:3,value:t.values.acceptance,onChange:t.handleChange,error:t.touched.acceptance&&!!t.errors.acceptance,helperText:t.touched.acceptance&&t.errors.acceptance})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(m,{variant:"subtitle1",children:"Description:"})}),e.jsx(r,{item:!0,xs:12,sm:8,children:e.jsx(T,{fullWidth:!0,id:"description",name:"description",multiline:!0,rows:3,value:t.values.description,onChange:t.handleChange,error:t.touched.description&&!!t.errors.description,helperText:t.touched.description&&t.errors.description})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(m,{variant:"subtitle1",children:"State:"})}),e.jsx(r,{item:!0,xs:12,sm:8,children:e.jsx(E,{fullWidth:!0,children:e.jsx(Ie,{id:"columnId",name:"columnId",displayEmpty:!0,value:t.values.columnId,onChange:t.handleChange,inputProps:{"aria-label":"Without label"},children:g.map((i,s)=>e.jsx(O,{value:i.id,children:i.title},s))})})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(m,{variant:"subtitle1",children:"Attachments:"})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(ge,{type:fe.standard,showList:!0,setFieldValue:t.setFieldValue,files:t.values.files,error:t.touched.files&&!!t.errors.files})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(oe,{children:e.jsx(q,{fullWidth:!0,variant:"contained",type:"submit",children:"Save"})})})]})})})})})};We.propTypes={open:I.bool,handleDrawerOpen:I.func};const ht=new ne.Chance,ut=me({title:pe().required("Task title is required"),dueDate:xe()}),Pe=({open:n,handleDrawerOpen:a,storyId:u})=>{const c=R(),{profiles:j,columns:g,userStory:w,items:v}=$(i=>i.kanban),t=je({initialValues:{id:`${ht.integer({min:1e3,max:9999})}`,title:"",assign:null,priority:"low",dueDate:new Date,description:"",commentIds:"",image:!1,storyId:"",columnId:g[0].id,files:[]},validationSchema:ut,onSubmit:i=>{const s={id:i.id,title:i.title,assign:i.assign,priority:i.priority,dueDate:i.dueDate?new Date(i.dueDate):new Date,description:i.description,commentIds:i.commentIds,image:i.image};c(Ke(i.columnId,g,s,v,u,w)),c(H({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"},close:!1})),a()}});return e.jsx(ae,{sx:{ml:n?3:0,flexShrink:0,zIndex:1200,overflowX:"hidden",width:{xs:320,md:450},"& .MuiDrawer-paper":{height:"100vh",width:{xs:320,md:450},position:"fixed",border:"none",borderRadius:"0px"}},variant:"temporary",anchor:"right",open:n,ModalProps:{keepMounted:!0},onClose:a,children:n&&e.jsx(P,{sx:{p:3},children:e.jsx("form",{onSubmit:t.handleSubmit,children:e.jsx(ve,{dateAdapter:we,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(m,{variant:"h4",children:"Add Task"})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(T,{fullWidth:!0,id:"title",name:"title",label:"Title",value:t.values.title,onChange:t.handleChange,error:t.touched.title&&!!t.errors.title,helperText:t.touched.title&&t.errors.title})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(m,{variant:"subtitle1",children:"Assign to:"})}),e.jsx(r,{item:!0,xs:12,sm:8,children:e.jsx(r,{container:!0,justifyContent:"flex-start",children:e.jsx(Se,{id:"assign",value:j.find(i=>i.id===t.values.assign)||null,onChange:(i,s)=>{t.setFieldValue("assign",s==null?void 0:s.id)},options:j,fullWidth:!0,autoHighlight:!0,getOptionLabel:i=>i.name,isOptionEqualToValue:i=>i.id===t.values.assign,renderOption:(i,s)=>e.jsxs(P,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...i,children:[e.jsx("img",{loading:"lazy",width:"20",src:be(`${s.avatar}`,ye.USERS),alt:""}),s.name]}),renderInput:i=>e.jsx(T,{...i,label:"Choose a assignee",inputProps:{...i.inputProps,autoComplete:"new-password"}})})})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(m,{variant:"subtitle1",children:"Prioritize:"})}),e.jsx(r,{item:!0,xs:12,sm:8,children:e.jsx(E,{children:e.jsxs(le,{row:!0,"aria-label":"color",value:t.values.priority,onChange:t.handleChange,name:"priority",id:"priority",children:[e.jsx(z,{value:"low",control:e.jsx(A,{color:"primary",sx:{color:"primary.main"}}),label:"Low"}),e.jsx(z,{value:"medium",control:e.jsx(A,{color:"warning",sx:{color:"warning.main"}}),label:"Medium"}),e.jsx(z,{value:"high",control:e.jsx(A,{color:"error",sx:{color:"error.main"}}),label:"High"})]})})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(m,{variant:"subtitle1",children:"Due date:"})}),e.jsx(r,{item:!0,xs:12,sm:8,children:e.jsx(De,{label:"Due Date",value:t.values.dueDate,format:"dd/MM/yyyy",onChange:i=>{t.setFieldValue("dueDate",i)},slotProps:{textField:{fullWidth:!0}}})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(m,{variant:"subtitle1",children:"Description:"})}),e.jsx(r,{item:!0,xs:12,sm:8,children:e.jsx(T,{fullWidth:!0,id:"description",name:"description",multiline:!0,rows:3,value:t.values.description,onChange:t.handleChange,error:t.touched.description&&!!t.errors.description,helperText:t.touched.description&&t.errors.description})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(m,{variant:"subtitle1",children:"State:"})}),e.jsx(r,{item:!0,xs:12,sm:8,children:e.jsx(E,{fullWidth:!0,children:e.jsx(Ie,{id:"columnId",name:"columnId",displayEmpty:!0,value:t.values.columnId,onChange:t.handleChange,inputProps:{"aria-label":"Without label"},children:g.map((i,s)=>e.jsx(O,{value:i.id,children:i.title},s))})})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(m,{variant:"subtitle1",children:"Attachments:"})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(ge,{type:fe.standard,showList:!0,setFieldValue:t.setFieldValue,files:t.values.files,error:t.touched.files&&!!t.errors.files})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(oe,{children:e.jsx(q,{fullWidth:!0,variant:"contained",type:"submit",children:"Save"})})})]})})})})})};Pe.propTypes={open:I.bool,handleDrawerOpen:I.func,storyId:I.string};var Y={},mt=K;Object.defineProperty(Y,"__esModule",{value:!0});var Re=Y.default=void 0,pt=mt(L()),ie=e;Re=Y.default=(0,pt.default)([(0,ie.jsx)("path",{d:"M5 5v14h14V5zm9 12H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z",opacity:".3"},"0"),(0,ie.jsx)("path",{d:"M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7zm12-4h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04-.39.08-.74.28-1.01.55-.18.18-.33.4-.43.64S3 4.72 3 5v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75M19 19H5V5h14z"},"1")],"AssignmentTwoTone");const xt=(n,a)=>{const u=a.palette.mode===N.DARK?X(a.palette.background.paper,.9):a.palette.primary.light;return{backgroundColor:n?u:"transparent",userSelect:"none"}},$e=({itemId:n,index:a})=>{const u=G(),c=R(),{columns:j,items:g,profiles:w,userStory:v}=$(l=>l.kanban),t=g.filter(l=>l.id===n)[0],i=j.filter(l=>l.itemIds.filter(f=>f===t.id)[0])[0],s=w.filter(l=>l.id===t.assign)[0],b=()=>{c(Ge(n))},[x,p]=k.useState(null),y=l=>{p(l==null?void 0:l.currentTarget)},S=()=>{p(null)},[D,C]=k.useState(!1),h=l=>{C(!1),l&&(c(Ne(t.id,g,j,v)),c(H({open:!0,message:"Task Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"},close:!1})))};return e.jsx(he,{draggableId:t.id,index:a,children:(l,f)=>e.jsxs(F,{hover:!0,...l.draggableProps,...l.dragHandleProps,ref:l.innerRef,sx:{"& th,& td":{whiteSpace:"nowrap"},"& .more-button":{opacity:0},":hover":{"& .more-button":{opacity:1}},...xt(f.isDragging,u)},children:[e.jsx(o,{sx:{pl:3,minWidth:120,width:120,height:46}}),e.jsx(o,{sx:{width:110,minWidth:110},children:e.jsxs(U,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(Re,{color:"primary",sx:{fontSize:"0.875rem"}}),e.jsx(m,{variant:"body2",children:t.id})]})}),e.jsx(o,{sx:{maxWidth:"calc(100vw - 850px)",minWidth:140},component:"th",scope:"row",children:e.jsx(de,{underline:"hover",color:"default",onClick:b,sx:{overflow:"hidden",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",":hover":{color:"primary.main"},cursor:"pointer"},children:t.title})}),e.jsxs(o,{sx:{width:60,minWidth:60},children:[e.jsx(ce,{className:"more-button",sx:{borderRadius:"12px"},onClick:y,"aria-controls":"menu-comment","aria-haspopup":"true","aria-label":"more options",children:e.jsx(_,{component:"span",size:"small",disableRipple:!0,children:e.jsx(Ce,{fontSize:"inherit"})})}),e.jsxs(ze,{id:"menu-comment",anchorEl:x,keepMounted:!0,open:!!x,onClose:S,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(O,{onClick:()=>{S(),b()},children:"Edit"}),e.jsx(O,{onClick:()=>{S(),C(!0)},children:"Delete"})]}),e.jsx(et,{title:t.title,open:D,handleClose:h})]}),e.jsx(o,{sx:{width:90,minWidth:90},children:i?i.title:"New"}),e.jsx(o,{sx:{width:140,minWidth:140},children:s?s.name:""}),e.jsx(o,{sx:{width:85,minWidth:85,textTransform:"capitalize"},children:t.priority}),e.jsx(o,{sx:{width:120,minWidth:120},children:t.dueDate?Ae(new Date(t.dueDate),"d MMM yyyy"):""})]},t.id)})};$e.propTypes={index:I.number,itemId:I.string};var J={},jt=K;Object.defineProperty(J,"__esModule",{value:!0});var _e=J.default=void 0,gt=jt(L()),se=e;_e=J.default=(0,gt.default)([(0,se.jsx)("path",{d:"M12 4c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8m5 9h-4v4h-2v-4H7v-2h4V7h2v4h4z",opacity:".3"},"0"),(0,se.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"},"1")],"AddCircleTwoTone");var Q={},ft=K;Object.defineProperty(Q,"__esModule",{value:!0});var Ee=Q.default=void 0,bt=ft(L()),yt=e;Ee=Q.default=(0,bt.default)((0,yt.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRight");const vt=(n,a,u)=>{const c=a.palette.mode===N.DARK?a.palette.background.default:a.palette.primary.light;return{backgroundColor:n||u?c:"transparent",userSelect:"none"}},wt=(n,a)=>{const u=a.palette.mode===N.DARK?a.palette.background.default:X(a.palette.grey[100],.8);return{background:n?u:"transparent"}},Fe=({story:n,index:a})=>{const u=G(),c=R(),j=$(d=>d.kanban),{columns:g,profiles:w,userStory:v,userStoryOrder:t}=j,[i,s]=Xe.useState(!1),b=g.filter(d=>d.id===n.columnId)[0],x=w.filter(d=>d.id===n.assign)[0],[p,y]=k.useState(!1),S=()=>{y(d=>!d)},D=()=>{y(d=>!d)},[C,h]=k.useState(!1),l=()=>{h(d=>!d)},f=()=>{h(d=>!d)},[W,M]=k.useState(null),He=d=>{M(d==null?void 0:d.currentTarget)},V=()=>{M(null)},[Z,ee]=k.useState(!1),Ve=d=>{ee(!1),d&&(c(Je(n.id,v,t)),c(H({open:!0,message:"Task Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"},close:!1})))};return e.jsxs(e.Fragment,{children:[e.jsx(he,{draggableId:n.id,index:a,children:(d,Be)=>e.jsxs(e.Fragment,{children:[e.jsxs(F,{hover:!0,...d.draggableProps,...d.dragHandleProps,ref:d.innerRef,sx:vt(Be.isDragging,u,i),children:[e.jsx(o,{sx:{pl:3,minWidth:120,width:120,height:46},children:e.jsxs(U,{direction:"row",spacing:.25,alignItems:"center",children:[e.jsx(Oe,{title:"Add Task",children:e.jsx(_,{"aria-label":"expand row",size:"small",onClick:D,children:e.jsx(_e,{fontSize:"small",color:"primary"})})}),e.jsx(_,{"aria-label":"expand row",size:"small",onClick:()=>s(!i),children:i?e.jsx(at,{fontSize:"small"}):e.jsx(Ee,{fontSize:"small"})})]})}),e.jsx(o,{sx:{width:110,minWidth:110},children:e.jsxs(U,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(tt,{color:"secondary",sx:{fontSize:"0.875rem"}}),e.jsx(m,{variant:"body2",children:n.id})]})}),e.jsx(o,{sx:{maxWidth:"calc(100vw - 850px)",minWidth:140},component:"th",scope:"row",children:e.jsx(de,{underline:"hover",color:"default",onClick:f,sx:{overflow:"hidden",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",":hover":{color:"primary.main"},cursor:"pointer"},children:n.title})}),e.jsxs(o,{sx:{width:60,minWidth:60},children:[e.jsx(ce,{className:"more-button",sx:{borderRadius:"12px"},onClick:He,"aria-controls":"menu-comment","aria-haspopup":"true",children:e.jsx(_,{component:"span",size:"small",disableRipple:!0,children:e.jsx(Ce,{fontSize:"inherit"})})}),e.jsxs(ze,{id:"menu-comment",anchorEl:W,keepMounted:!0,open:!!W,onClose:V,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(O,{onClick:()=>{V(),f()},children:"Edit"}),e.jsx(O,{onClick:()=>{V(),ee(!0)},children:"Delete"})]}),Z&&e.jsx(rt,{title:n.title,open:Z,handleClose:Ve})]}),e.jsx(o,{sx:{width:90,minWidth:90},children:b?b.title:""}),e.jsx(o,{sx:{width:140,minWidth:140},children:x?x.name:""}),e.jsx(o,{sx:{width:85,minWidth:85,textTransform:"capitalize"},children:n.priority}),e.jsx(o,{sx:{width:120,minWidth:120},children:n.dueDate?Ae(new Date(n.dueDate),"d MMM yyyy"):""})]}),e.jsx(ue,{droppableId:n.id,type:"item",children:(B,Ue)=>{var te;return e.jsx(F,{ref:B.innerRef,...B.droppableProps,sx:wt(Ue.isDraggingOver,u),children:e.jsx(o,{sx:{padding:0},colSpan:8,children:e.jsx(Ye,{in:i,timeout:"auto",unmountOnExit:!0,children:i&&e.jsx(P,{sx:{margin:0},children:e.jsx(ke,{children:e.jsx(Te,{size:"small","aria-label":"purchases",children:e.jsxs(Me,{children:[(te=n.itemIds)==null?void 0:te.map((re,qe)=>e.jsx($e,{itemId:re,index:qe},re)),B.placeholder]})})})})})})})}})]})}),e.jsx(it,{story:n,open:C,handleDrawerOpen:l}),e.jsx(Pe,{open:p,handleDrawerOpen:S,storyId:n.id})]})};Fe.propTypes={index:I.number,story:I.object};const St=(n,a)=>({background:n?X(a.palette.secondary.light,.5):"transparent"}),gr=()=>{const n=G(),a=R(),u=$(s=>s.kanban),{userStory:c,userStoryOrder:j}=u,g=s=>{let b;const{source:x,destination:p,draggableId:y,type:S}=s;if(!p||p.droppableId===x.droppableId&&p.index===x.index)return;if(S==="user-story"){const h=Array.from(j);h.splice(x.index,1),h.splice(p==null?void 0:p.index,0,y),a(Qe(h));return}const D=c.filter(h=>h.id===x.droppableId)[0],C=c.filter(h=>h.id===p.droppableId)[0];if(D===C){const h=Array.from(D.itemIds);h.splice(x.index,1),h.splice(p.index,0,y);const l={...D,itemIds:h};b=c.map(f=>f.id===l.id?l:f)}else{const h=Array.from(D.itemIds);h.splice(x.index,1);const l={...D,itemIds:h},f=Array.from(C.itemIds);f.splice(p.index,0,y);const W={...C,itemIds:f};b=c.map(M=>M.id===l.id?l:M.id===W.id?W:M)}a(Ze(b))},[w,v]=k.useState(!1),t=()=>{v(s=>!s)},i=()=>{v(s=>!s)};return e.jsx(e.Fragment,{children:e.jsxs(ke,{children:[e.jsx(st,{onDragEnd:g,children:e.jsx(ue,{droppableId:"user-story",type:"user-story",children:(s,b)=>e.jsxs(Te,{size:"small","aria-label":"collapsible table",...s.droppableProps,ref:s.innerRef,sx:St(b.isDraggingOver,n),children:[e.jsx(ot,{sx:{"& th,& td":{whiteSpace:"nowrap"}},children:e.jsxs(F,{children:[e.jsx(o,{sx:{pl:3},children:e.jsx(Oe,{title:"Add User Story",children:e.jsx(q,{variant:"contained",size:"small",color:"secondary",onClick:i,endIcon:e.jsx(lt,{}),children:"ADD"})})}),e.jsx(o,{children:"Id"}),e.jsx(o,{children:"Title"}),e.jsx(o,{}),e.jsx(o,{children:"State"}),e.jsx(o,{children:"Assigned To"}),e.jsx(o,{children:"Priority"}),e.jsx(o,{children:"Due Date"})]})}),e.jsxs(Me,{sx:{"& th,& td":{whiteSpace:"nowrap"}},children:[j.map((x,p)=>{const y=c.filter(S=>S.id===x)[0];return e.jsx(Fe,{story:y,index:p},y.id)}),s.placeholder]})]})})}),e.jsx(We,{open:w,handleDrawerOpen:t}),e.jsx(nt,{})]})})};export{gr as default};
