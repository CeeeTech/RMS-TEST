import{r as s,M as w,V as S,l as e,$ as b,a2 as k,G as i,D as L,e as E,Y as n,a4 as M}from"./index-D8YYVO5u.js";import{d as O}from"./Search-B-jXLfo6.js";import{u as I,a as T}from"./useLogout-DhowCGVt.js";import{T as A}from"./TextField-C6zly-qr.js";import{I as F}from"./InputAdornment-BzK__wF4.js";import{D as f}from"./DataGrid-C6EHKwmL.js";import"./FormControl-CK8irnJG.js";import"./utils-DoM3o7-Q.js";import"./InputLabel-D3KD0Tiy.js";import"./FormLabel-CkCbamwV.js";import"./Select-BCrvOGUu.js";import"./Menu-CF8hg8nh.js";import"./InputBase-CYOPOv7O.js";import"./OutlinedInput-DWLv5J1V.js";import"./FormHelperText-J-lHncki.js";import"./toPropertyKey-H7AvS4qg.js";import"./typeof-QjJsDpFa.js";import"./Autocomplete-ov49sIe9.js";import"./ListSubheader-CI_sh-aD.js";import"./usePreviousProps-BZSYhglc.js";import"./MenuItem-BsENe2oa.js";import"./Badge-FlIsjnEa.js";import"./Checkbox-CEnLEK7F.js";import"./Switch-D4qv7NnH.js";import"./Tooltip-C3hP7asU.js";import"./Skeleton-Cmx2XEAi.js";import"./CircularProgress-svyJDbBK.js";import"./TablePagination-o03ZB4EV.js";import"./LastPage-DL6beHfg.js";import"./TableCell-DNy8RGqP.js";const l=.2;E(f)(({theme:t})=>({"& .${gridClasses.row}.even":{backgroundColor:t.palette.grey[200],"&:hover, &.Mui-hovered":{backgroundColor:n(t.palette.primary.main,l),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:n(t.palette.primary.main,l+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:n(t.palette.primary.main,l+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n(t.palette.primary.main,l+t.palette.action.selectedOpacity)}}}}}));function ue(){const[t,g]=s.useState([]),[c,h]=s.useState([]),[x,u]=s.useState(!0),{user:C}=I(),{logout:d}=T(),y=r=>{const o=r.target.value.toLowerCase(),m=t.filter(p=>p.name.toLowerCase().includes(o));h(m)};async function v(){try{const r=await fetch(M.apiUrl+"api/courses",{method:"GET",headers:{Authorization:`Bearer ${C.token}`}});if(!r.ok){if(r.status===401&&(console.error("Unauthorized access. Logging out."),d()),r.status===500){console.error("Internal Server Error."),d();return}return}const o=await r.json();console.log(o);const p=o.filter(a=>a.status===!0).map(a=>({id:a._id,...a}));g(p),u(!1)}catch(r){console.error("Error fetching data:",r.message),u(!1)}}s.useEffect(()=>{v()},[]),console.log(t);const j=w();S(j.breakpoints.down("md"));const D=[{field:"name",headerName:"Course Name",flex:2},{field:"rate",headerName:"Potential Earning(LKR)",flex:1,valueFormatter:r=>{const o=r.value;return o!=null?o.toFixed(2):"Not available"}},{field:"description",headerName:"Description",flex:3}];return e.jsx(e.Fragment,{children:e.jsxs(b,{children:[x&&e.jsx(k,{}),e.jsxs(i,{container:!0,alignItems:"center",justifyContent:"space-between",sx:{px:3,py:2},children:[e.jsx(i,{item:!0,children:e.jsx(L,{variant:"h3",component:"h3",children:"Course List"})}),e.jsx(i,{item:!0,xs:8,sm:4,children:e.jsx(A,{fullWidth:!0,margin:"normal",name:"course",type:"text",SelectProps:{native:!0},defaultValue:"",InputProps:{startAdornment:e.jsx(F,{position:"start",children:e.jsx(O,{})})},onChange:y})})]}),e.jsx(i,{item:!0,xs:12,children:e.jsx("div",{style:{height:710,width:"100%"},children:e.jsx(f,{rows:c.length>0?c:t,columns:D,rowHeight:40,initialState:{pagination:{paginationModel:{page:0,pageSize:14}}},pageSizeOptions:[10,14,100],getStatusWithColor:!0})})})]})})}export{ue as default};
