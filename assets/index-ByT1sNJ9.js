import{P as E,M as $,r as c,l as e,ac as H,K as g,T as z,G as i,D as F,ab as v,Z as J,L as O,aC as U,am as L,an as R,d4 as Z,aJ as Q,$ as X,a1 as N,F as b,S as A,E as k,bh as Y}from"./index-aYNdDFsw.js";import{d as ee,A as te}from"./AdapterDayjs-CkDoYivt.js";import{c as se,a as V}from"./index.esm-Cs06t5W7.js";import{u as ne}from"./formik.esm-BnGHO-0j.js";import{F as P}from"./FormControl-Dj_1sEpm.js";import{I as B}from"./InputLabel-taUurEu1.js";import{S as W}from"./Select-DVXOMGOZ.js";import{M as u}from"./MenuItem-BtCOIvr_.js";import{T as ae,a as re,b as w,c as le}from"./TableRow-DaIFs5wn.js";import{T as ie}from"./TableHead-CmeJcxgQ.js";import{T as l}from"./TableCell-CM4Hu41t.js";import{C as oe}from"./Checkbox-BjGpkq_j.js";import{T as f}from"./TextField-DGRzrz84.js";import ce from"./index-Dt7gt8A5.js";import{d as de}from"./Add-CSK2dzS_.js";import{d as ue}from"./Check-DNC-PvLH.js";import{I as me}from"./InputAdornment-P1yKTSAa.js";import{L as he}from"./dateViewRenderers-DtPWu7er.js";import{D as xe}from"./DatePicker-CJ8c0NH0.js";import{D as pe}from"./DialogContent-v1P_Pn4u.js";import{C as je}from"./CardActions-BixJOMBP.js";import{r as fe}from"./random-D-oTin4B.js";import"./isArrayLike-C-wli46Q.js";import"./_getTag-D0Y4uZ2p.js";import"./isSymbol-ckKrFcy_.js";import"./utils-DoM3o7-Q.js";import"./FormLabel-CLieAm2i.js";import"./Menu-BcGYJvIj.js";import"./InputBase-DT8iEGhH.js";import"./OutlinedInput-CX89FYVG.js";import"./FormHelperText-C1AdVjvj.js";import"./WorkTwoTone-D6VkduLV.js";import"./PersonAddTwoTone-DBDc3Y4w.js";import"./PinDropTwoTone-DIP_Ioum.js";import"./DialogActions-DE2c5d4J.js";import"./ListItem-C7PTSiU0.js";import"./ListItemSecondaryAction-BoxADv29.js";import"./DesktopDatePicker-D67ugVtj.js";import"./useDesktopPicker-D5r1bgKN.js";import"./useMobilePicker-bAYllFi4.js";const _=({formik:h,row:m})=>{const x=$(),[o,C]=c.useState([]),[y,S]=c.useState(""),I=t=>o.indexOf(t)!==-1,D=t=>{const r=o.indexOf(t);let n=[];r===-1?n=n.concat(o,t):r===0?n=n.concat(o.slice(1)):r===o.length-1?n=n.concat(o.slice(0,-1)):r>0&&(n=n.concat(o.slice(0,r),o.slice(r+1))),C(n)},T=t=>{S(t.target.value)};let d=h.values.amount||0;return e.jsxs(e.Fragment,{children:[e.jsxs(H,{sx:{borderRadius:0},children:[e.jsx(g,{sx:{p:2,bgcolor:x.palette.mode===z.DARK?"dark.main":"grey.200"},children:e.jsxs(i,{container:!0,alignItems:"center",justifyContent:"space-between",flexWrap:"nowrap",children:[e.jsx(i,{item:!0,lg:3,children:e.jsx(F,{variant:"subtitle1",children:"Unpaid Invoice"})}),e.jsx(i,{item:!0,lg:2,children:e.jsxs(P,{fullWidth:!0,children:[e.jsx(B,{id:"demo-simple-select-label",children:"Select Month"}),e.jsxs(W,{labelId:"demo-simple-select-label",id:"demo-simple-select",onChange:T,value:y,label:"Select Month",children:[e.jsx(u,{value:1,children:"Last Month"}),e.jsx(u,{value:2,children:"This Month"})]})]})})]})}),e.jsx(v,{})]}),e.jsx(ae,{component:J,children:e.jsxs(re,{sx:{minWidth:650},"aria-label":"simple table",children:[e.jsx(ie,{children:e.jsxs(w,{children:[e.jsx(l,{}),e.jsx(l,{children:"Issue Date"}),e.jsx(l,{children:"Invoice No."}),e.jsx(l,{children:"Due Date"}),e.jsx(l,{align:"right",children:"Due Amount"}),e.jsx(l,{align:"right",children:"Payment Value"})]})}),e.jsxs(le,{children:[m.map((t,r)=>{const n=I(r),p=`enhanced-table-checkbox-${r}`;let j=d;return d>=(t==null?void 0:t.quantity)?(j=t==null?void 0:t.quantity,d=d-(t==null?void 0:t.quantity)):d<t.quantity&&(j=d,d=0),e.jsxs(w,{hover:!0,onClick:()=>D(r),role:"checkbox","aria-checked":n,tabIndex:-1,selected:n,sx:{cursor:"pointer"},children:[e.jsx(l,{padding:"checkbox",sx:{pl:3},children:e.jsx(oe,{checked:n,inputProps:{"aria-labelledby":p}})}),e.jsx(l,{children:t==null?void 0:t.date}),e.jsx(l,{children:e.jsxs(F,{component:O,to:"/apps/invoice/invoice-list",variant:"h5",sx:{textDecoration:"none"},children:["#",t.invoice_id]})}),e.jsx(l,{children:t==null?void 0:t.due_date}),e.jsxs(l,{align:"right",children:["$ ",t==null?void 0:t.quantity]}),e.jsx(l,{align:"right",children:e.jsx(f,{type:"number",value:j})})]},r)}),m.length<=0&&e.jsx(w,{children:e.jsx(l,{align:"center",colSpan:6,children:"No Invoice / Select Client"})})]})]})})]})};_.propTypes={formik:E.object,row:E.array};const be=se({receiptID:V().required("Receipt ID is Required"),amount:V().required("Received Amount is Required")});function ge(h,m){return[...h].sort(()=>.5-Math.random()).slice(0,m)}const lt=()=>{const h=$(),m=U(),{detailCards:x}=L(a=>a.user),{invoices:o}=L(a=>a.customer),[C,y]=c.useState(ee("2022-04-17")),[S,I]=c.useState([]),[D,T]=c.useState(""),[d,t]=c.useState([]),[r,n]=c.useState(""),[p,j]=c.useState(!1),M=()=>{j(!p)},s=ne({enableReinitialize:!0,initialValues:{receiptID:"",amount:""},validationSchema:be,onSubmit:a=>{a&&(R(Y({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"},close:!1})),m("/apps/invoice/payment/payment-list"))}}),K=a=>{T(a.target.value),t(a.target.value?ge(o,fe(1,5)):[])};c.useEffect(()=>{I(x)},[x]),c.useEffect(()=>{R(Z()),R(Q())},[]);const G=a=>{n(a.target.value)};return e.jsx(X,{title:"Add New Payment Received",sx:{"& .MuiOutlinedInput-input":{borderRadius:1.5},"& .MuiCardContent-root":{p:0},".MuiCardContent-root:last-child":{paddingBottom:"0px"}},children:e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsx(g,{sx:{p:2.5,bgcolor:h.palette.mode===z.DARK?"background.default":"primary.light"},children:e.jsx(i,{container:!0,spacing:N,children:e.jsx(i,{item:!0,xs:12,sm:8,md:4,children:e.jsxs(P,{fullWidth:!0,children:[e.jsx(B,{id:"demo-simple-select-label",children:"Select Client"}),e.jsxs(W,{endAdornment:e.jsx(me,{position:"end",children:e.jsx(b,{onClick:M,startIcon:e.jsx(de,{}),children:"New client"})}),sx:{"& .MuiSelect-icon":{right:120}},labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Client",onChange:K,value:D,children:[e.jsx(u,{value:"",children:"Select Client"}),S.map((a,q)=>e.jsx(u,{value:q,children:a.name},q))]})]})})})}),e.jsx(g,{sx:{p:2.5},children:e.jsxs(i,{container:!0,spacing:N,children:[e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(f,{fullWidth:!0,label:"Payment Receipt ID",id:"receiptID",name:"receiptID",value:s.values.receiptID,onChange:s.handleChange,onBlur:s.handleBlur,error:s.touched.receiptID&&!!s.errors.receiptID,helperText:s.touched.receiptID&&s.errors.receiptID})}),e.jsx(i,{item:!0,xs:12,sm:6,md:8,sx:{display:{xs:"none",sm:"flex"}}}),e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(P,{fullWidth:!0,children:[e.jsx(B,{id:"demo-simple-select-label",children:"Payment Method"}),e.jsxs(W,{labelId:"demo-simple-select-label",label:"Payment Method",value:r,onChange:G,placeholder:"Enter Amount",children:[e.jsx(u,{value:"",children:"Select Payment Method"}),e.jsx(u,{value:1,children:"Cash"}),e.jsx(u,{value:2,children:"Credit Card"}),e.jsx(u,{value:3,children:"Master Card"})]})]})}),e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(f,{sx:{border:"none"},label:"Received Amount",fullWidth:!0,id:"amount",name:"amount",value:s.values.amount,onChange:s.handleChange,onBlur:s.handleBlur,error:s.touched.amount&&!!s.errors.amount,helperText:s.touched.amount&&s.errors.amount,placeholder:"Enter Amount"})}),e.jsx(i,{item:!0,xs:12,sm:12,md:4,sx:{display:{xs:"none",sm:"none",md:"flex"}}}),e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(f,{fullWidth:!0,label:"Reference"})}),e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(he,{dateAdapter:te,children:e.jsx(xe,{slotProps:{textField:{fullWidth:!0}},label:"Create Date",value:C,onChange:a=>y(a)})})})]})}),e.jsx(v,{}),e.jsx(pe,{open:p,onClose:M,sx:{"& .MuiDialog-paper":{maxWidth:"100%",width:980}},children:p&&e.jsx(ce,{isOpen:!0,handleDialogToggler:M})}),e.jsx(_,{formik:s,row:d}),e.jsx(v,{}),e.jsx(g,{sx:{p:2.5},children:e.jsx(f,{fullWidth:!0,multiline:!0,rows:2,label:"Add Note"})}),e.jsx(v,{}),e.jsx(je,{sx:{justifyContent:"flex-end"},children:e.jsxs(A,{direction:{xs:"column",sm:"row"},spacing:1.5,justifyContent:"space-between",children:[e.jsx(A,{justifyContent:"flex-start",children:e.jsx(k,{children:e.jsx(b,{variant:"contained",startIcon:e.jsx(ue,{}),size:"large",sx:{ml:2,textDecoration:"none"},type:"submit",children:"Save & View Receipt"})})}),e.jsxs(A,{direction:"row",spacing:1.5,justifyContent:"flex-end",children:[e.jsx(k,{children:e.jsx(b,{variant:"contained",size:"large",type:"submit",children:"Save"})}),e.jsx(k,{children:e.jsx(b,{variant:"outlined",component:O,to:"/apps/invoice/payment/payment-list",size:"large",children:"Cancel"})})]})]})})]})})};export{lt as default};
